<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.2  (Linux)">
	<META NAME="CREATED" CONTENT="20100112;19261000">
	<META NAME="CHANGED" CONTENT="20100129;12431800">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P ALIGN=CENTER><FONT SIZE=6><B>PARAVIS development</B></FONT></P>
<P ALIGN=CENTER><FONT SIZE=6><B>PARAVIS user documentation</B></FONT></P>
<P STYLE="page-break-before: always"><A HREF="#1.Introduction|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>1.Introduction</B></SPAN></FONT></A></P>
<P><A HREF="#2.Building environment|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>2.Building
environment</B></SPAN></FONT></A></P>
<P><A HREF="#3.VTK library|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>3.VTK
library</B></SPAN></FONT></A></P>
<P><A HREF="#4.Building of PARAVIS|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>4.Building
of PARAVIS</B></SPAN></FONT></A></P>
<P><A HREF="#5.Starting SALOME with PARAVIS|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>5.Starting
SALOME with PARAVIS</B></SPAN></FONT></A></P>
<P><A HREF="#6.Commands accessible in Python console|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>6.Commands
accessible in Python console</B></SPAN></FONT></A></P>
<P><A HREF="#7.Trace management|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>7.Trace
management</B></SPAN></FONT></A></P>
<P><A HREF="#8.PARAVIS GUI specific|outline"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN LANG="fr-FR"><B>8.PARAVIS
GUI specific</B></SPAN></FONT></A></P>
<H1><A NAME="1.Introduction|outline"></A>Introduction</H1>
<P STYLE="margin-bottom: 0in">This document describes features of
ParaView Python extractor using in PARAVIS module of SALOME platform.
In general building of PARAVIEW module is not too much differ from
usual process of any other SALOME module building, and result Python
API extracted for using in SALOME Python console is similar to the
server manager API of ParaView. But there are some features what is
desirable to understand for effective using of extractor.</P>
<H1><A NAME="2.Building environment|outline"></A>Building environment</H1>
<P STYLE="margin-bottom: 0in; page-break-inside: auto">In addition to
standard SALOME environment following environment variables has to be
defined for PARAVIS building and testing:</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">PVHOME –
	points to installation directory of ParaView.</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">PVVERSION
	– defines a number of installed ParaView version.</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">PATH=&quot;${PVHOME}/bin:${PATH}&quot;</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">LD_LIBRARY_PATH=”${PVHOME}/bin:${PVHOME}/lib/paraview-${PVVERSION}:${LD_LIBRARY_PATH}&quot;</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">PYTHONPATH=&quot;${PVHOME}/bin:${PVHOME}/lib/paraview-${PVVERSION}:${PYTHONPATH}&quot;</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">TESTDIR –
	points to a directory which contains test script files. Usually it
	is PARAVIS_SRC/test.</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">PVDATA –
	points to ParaViewData directory.</P>
</OL>
<P STYLE="margin-bottom: 0in; page-break-inside: auto">Also it is
necessary to check that PARAVIS_SRC  directory contains following
files and they are up-to-date:</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">src/Paraview/lex.yy.c</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">src/Paraview/vtkParse.tab.c</P>
	<LI><P STYLE="margin-bottom: 0in; page-break-inside: auto">src/Paraview/vtkParse.h</P>
</OL>
<H1><A NAME="3.VTK library|outline"></A>VTK library</H1>
<P STYLE="margin-bottom: 0in; page-break-inside: auto">SALOME already
uses VTK library for visualization and post-processing purposes.
PARAVIS also uses VTK library supplied with ParaView. In order to
avoid problem with using of different versions of VTK library in
different components of SALOME platform it is necessary to use the
same version supplied with ParaView for all components and modules of
SALOME. 
</P>
<P STYLE="margin-bottom: 0in; page-break-inside: auto">For this
purposes a new option “--with-paraview” has been defined for
configure script. This option configures building procedure to use
VTK from ParaView. It means that GUI package and all modules has to
be configured with this option.</P>
<H1><A NAME="4.Building of PARAVIS|outline"></A>Building of PARAVIS</H1>
<P STYLE="margin-bottom: 0in; page-break-inside: auto"><BR>
</P>
<OL>
	<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0.08in; page-break-inside: auto; widows: 2; orphans: 2">
	Call <FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2><SPAN LANG="en-US"><B>build_</B></SPAN></FONT></FONT></FONT><B>configure</B>
	script in sources directory: 
	</P>
	<P ALIGN=JUSTIFY STYLE="margin-bottom: 0.08in; page-break-inside: auto; widows: 2; orphans: 2">
	<I><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2><SPAN LANG="en-US">&gt;
	</SPAN></FONT></FONT></FONT>build configure</I></P>
	<LI><P>Launch <B>configure</B> script from a build directory. 
	</P>
	<P><I>&gt; ../PARAVIS_SRC/configure --prefix=$PARAVIS_ROOT_DIR</I></P>
	<LI><P>Call <B>make</B> command in build directory. 
	</P>
	<P><I>&gt; make</I></P>
	<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0.08in; page-break-inside: auto; widows: 2; orphans: 2">
	<FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2><SPAN LANG="en-US"><B>Call
	</B></SPAN></FONT></FONT></FONT><B>make install</B> <SPAN STYLE="font-weight: medium">command
	in build directory. </SPAN>
	</P>
	<P ALIGN=JUSTIFY STYLE="margin-bottom: 0.08in; page-break-inside: auto; widows: 2; orphans: 2">
	<I><SPAN STYLE="font-weight: medium">&gt; </SPAN><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2><SPAN LANG="en-US"><SPAN STYLE="font-weight: medium">make
	</SPAN></SPAN></FONT></FONT></FONT><SPAN STYLE="font-weight: medium">install</SPAN></I></P>
</OL>
<H1 ALIGN=LEFT STYLE="margin-top: 0.42in; margin-bottom: 0.08in; page-break-inside: avoid; widows: 2; orphans: 2; page-break-after: avoid"><A NAME="5.Starting SALOME with PARAVIS|outline"></A>
<FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=4 STYLE="font-size: 16pt"><B>Starting
SALOME with PARAVIS</B></FONT></FONT></FONT></H1>
<P>&gt; runSalome –modules=&quot;PARAVIS&quot;</P>
<P>If it is necessary then other SALOME modules can be added to
“modules” list separated by comma.</P>
<H1><A NAME="6.Commands accessible in Python console|outline"></A>Commands
accessible in Python console</H1>
<P>Loading ParaView Python API for PARAVIS can be done with help of
command:</P>
<P><I>&gt; from pvsimple import *</I></P>
<P>This command makes accessible the same Python API what provided by
simple.py module in ParaView (see ParaView documentation). 
</P>
<H1><A NAME="7.Trace management|outline"></A>Trace management</H1>
<P>Last version of ParaView is supplied with trace functionality.
PARAVIS also supports this feature. But in contrary to ParaView,
which can start/stop trace in any moment, in PARAVIS trace is
activating or deactivating for whole session.</P>
<P>Trace functionality can be switched on/off in SALOME preferences
dialog box in PARAVIS tab (main menu | Preferences...). It contains
check box “Deactivate Trace”. By default the trace is activated.
Change of check box state makes effect only for next session.</P>
<P>User can get the trace with help of two commands (after pvsimple
import):</P>
<OL>
	<LI><P>PrintTrace() - prints the trace content directly into Python
	console window.</P>
	<LI><P>SaveTrace(fileName) - saves the trace into a given disk file.</P>
</OL>
<P>Also trace is using for “Dump Study” functionality. But if the
tracing is switched off then “Dump Study” doesn't saves PARAVIS
module state.</P>
<H1>SALOME study save</H1>
<P>On SALOME study saving PARAVIS module data is also saved in the
study. This data is saved in form of ParaView state file. ParaView
state file could have references on external files imported during
PARAVIS working session. These referenced files can be saved with the
current study depending on preference “Paraview state saving type”
defined in PARAVIS preferences dialog box.  This preference can have
three possible state:</P>
<OL>
	<LI><P>“Save referenced files only for built-in server”. In case
	if this option is active then referenced files will be saved in
	study together with ParaView state only if in PARAVIS was used
	built-in ParaView server. In case of remote ParaView server the
	state will be saved as it is without referenced files.</P>
	<LI><P>“Always save referenced files if they are accessible”. In
	this case referenced files will be saved with ParaView state for any
	type of ParaView server but only in case if they are accessible
	across local file system.</P>
	<LI><P>“Never save referenced files”. In this case referenced
	files will be never saved with ParaView state.</P>
</OL>
<P>It is necessary to be aware that if referenced files are not saved
in study then there is no guarantee that the saved study will be
opened correctly on other station or if the referenced files will be
moved or deleted.</P>
<H1><A NAME="8.PARAVIS GUI specific|outline"></A>PARAVIS GUI specific</H1>
<P STYLE="margin-bottom: 0in; page-break-inside: auto">In fact
PARAVIS is a ParaView GUI integrated into SALOME environment. General
architecture of ParaView is very different from general architecture
of SALOME. If SALOME is an application which is able to open several
documents (studies) within one application session because it has
multi-document architecture, then ParaView has a single document
architecture what means that it can have only one document (data
structure) opened within one session.</P>
<P STYLE="margin-bottom: 0in; page-break-inside: auto">This leads to
the fact that PARAVIS module can be opened only once within SALOME
application session. It can be opened only in a first desktop
appeared after SALOME launch. Other desktops, even they opened with
study containing PARAVIS data, can not load PARAVIS module.</P>
<P ALIGN=LEFT><BR><BR>
</P>
</BODY>
</HTML>